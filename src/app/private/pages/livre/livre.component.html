@if(isEmprunterOpen) {
<main class="add-emprunter">
  <div class="form-container">
    <button
      class="btn-close-form"
      type="button"
      aria-label="close buttton"
      (click)="closeEmpreinte()"
    >
      <i class="fa fa-times"></i>
    </button>
    <form
      class="style-form"
      (submit)="createEmprunter()"
      [formGroup]="EmprunterLivre"
    >
      <div class="container-form-body">
        <h1>Emprunter un livre</h1>
        <hr />

        <div class="container-form">
          <span>Titre du livre</span>
          @if( selectedlivre){
          <div class="container-form titreLivre">
            <input
              type="text"
              formControlName="titreLivre"
              [(ngModel)]="selectedlivre.titreLivre"
              id="titreLivre"
              style="
                border: 1px solid #c0c0c0;
                padding: 10px;
                letter-spacing: 1px;
                font-weight: bold;
                cursor: not-allowed;
              "
              [disabled]="true"
            />
          </div>
          }
        </div>

        <div class="container-form">
          <span>Le nom&prenom de l'Adherent</span>
          <select formControlName="nom_Adh" id="nomAdherent" required>
            @for(i of allAdherent; track $index){
            <option value="{{ i.nom_Adh }}">
              {{ i.nom_Adh }} {{ i.prenom_Adh }}
            </option>
            }
          </select>
        </div>

        <div class="container-form">
          <span>Nombre de jours d'emprunt</span>
          <input
            id="joursEmprunt"
            formControlName="joursEmprunt"
            type="number"
          />
        </div>

        <div class="btn-add">
          <button
            class="btn"
            type="submit"
            [disabled]="isButtonDisabled()"
            [ngClass]="{
              'btn-primary': !isButtonDisabled(),
              'btn-secondary': isButtonDisabled()
            }"
          >
            {{ verification }}
          </button>
        </div>
      </div>
    </form>
  </div>
</main>

} @if(isVoirplus){
<main class="add-voir-plus">
  <div class="form-container">
    <button
      class="btn-close-form"
      type="button"
      aria-label="close buttton"
      (click)="closeVoirPLus()"
    >
      <i class="fa fa-times"></i>
    </button>
    <form class="style-form">
      <h1 class="title-voir-plus">En savoir plus...</h1>
      <hr />
      <div class="container-form-body">
        @if( selectedlivre){
        <div class="container-form titreLivre">
          <label for="titreLivre">Titre </label>
          <p>{{ selectedlivre.titreLivre }}</p>
        </div>

        <div class="container-form auteurLivre">
          <label for="auteurLivre">Auteur </label>
          <p>{{ selectedlivre.auteurLivre }}</p>
        </div>

        <div class="container-form editionLivre">
          <label for="editionLivre">Edition </label>
          <p>{{ selectedlivre.editionLivre }}</p>
        </div>

        <div class="container-form categorieLivre">
          <label for="categorieLivre">Categorie </label>
          <p>{{ selectedlivre.categorie }}</p>
        </div>

        <div class="description">
          <label for="description">Description </label>
          <p>{{ selectedlivre.description }}</p>
        </div>
        }
        <div class="btn-group">
          <div class="down">
            <button type="button" class="btn download">
              <i class="fa fa-download"></i> Telecharger
            </button>
          </div>

          @if (isSynthPlaying) {
          <button
            type="button"
            class="btn btn-download-book transition"
            (click)="cancel()"
            style="
              border: 1px solid var(--text-dark);
              background: 0;
              color: var(--text-dark);
            "
          >
            <i class="fa-solid fa-ear-deaf"></i> ArrÃªter
          </button>
          } @else {
          <button
            type="button"
            class="btn btn-download-book transition"
            (click)="speakText()"
            style="
              border: 1px solid var(--text-dark);
              background: 0;
              color: var(--text-dark);
            "
          >
            <i class="fa-solid fa-ear-listen"></i> Description vocale
          </button>
          }
          <div class="issuebook">
            <button type="button" class="btn link" (click)="openEmpreinte()">
              <i class="fas fa-hand-holding-usd"></i>
              Emprunter
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</main>

} @if(isAddLivre){
<main class="add-livre">
  <div class="form-container">
    <button
      class="btn-close-form"
      type="button"
      aria-label="close buttton"
      (click)="closeCard()"
    >
      <i class="fa fa-times"></i>
    </button>
    <form class="style-form" (submit)="createlivre()" [formGroup]="LivreForm">
      <div class="container-form-body">
        <h1>{{ isModifAction ? "Modification" : "Enregistrement" }}</h1>
        <hr />
        <div class="container-form titreLivre">
          <input type="text" formControlName="titreLivre" required /><span
            >Titre*
          </span>
        </div>
        @if (titreLivre?.touched && titreLivre?.errors?.["required"]) {
        <p class="error-text">Titre, s'il vous plait.</p>
        }
        <div class="container-form auteurLivre">
          <input type="text" formControlName="auteurLivre" required />
          <span>Auteur* </span>
        </div>
        @if (auteurLivre?.touched && auteurLivre?.errors?.["required"]) {
        <p class="error-text">Auteur, s'il vous plait.</p>
        }
        <div class="container-form editionLivre">
          <input type="text" formControlName="editionLivre" required />
          <span>Edition* </span>
        </div>
        @if (editionLivre?.touched && editionLivre?.errors?.["required"]) {
        <p class="error-text">Edition, s'il vous plait.</p>
        }
        <div class="categorie">
          <select formControlName="categorie" id="categorie" required>
            <option value="choisir">Choisiser la categorie</option>
            @for (item of categorie; track $index) {

            <option [value]="item">{{ item }}</option>
            }
          </select>
        </div>

        <div class="description">
          <textarea
            class="text"
            formControlName="description"
            id="description"
            cols="30"
            rows="10"
            required
          ></textarea>
          <span>Description* </span>
        </div>
        <div class="btn-add">
          @if (LivreForm.valid) {
          <button
            class="{{
              isRegisterSuccess
                ? 'btn btn-success transition'
                : 'btn btn-primary transition'
            }}"
            type="submit"
          >
            @if(!isSubmitting && !isRegisterSuccess) {
            {{ isModifAction ? "Modifier" : "Valider" }} }
          </button>
          }
        </div>
      </div>
    </form>
  </div>
</main>

}
<main class="main-livre">
  <section class="heading">
    <h1 class="title">Les livres disponibles</h1>
    <div class="search">
      <input
        type="search"
        placeholder="Search"
        [formControl]="search"
        name="search"
        id="search"
      />
      <button><i class="fa fa-search"></i></button>
    </div>
    <div class="btn-add">
      <button class="add" (click)="openLivre()">
        <i class="fa fa-add"></i>
      </button>
    </div>
  </section>

  <section class="body">
    @for( item of livres; track $index){

    <div class="book">
      <div class="deletebook">
        <button class="btn btn-success" (click)="updatelivre(item)">
          <i class="fas fa-pencil"></i>
        </button>
        <button class="btn btn-danger" (click)="deletelivre(item.id)">
          <i class="fa-solid fa-trash"></i>
        </button>
      </div>
      <div class="list-book">
        <span class="title book">
          <i class="fas fa-heading"></i> Titre :
          <p>{{ item.titreLivre }}</p></span
        >
        <span class="title auteur"
          ><i class="fa fa-user"></i> Auteur :
          <p>{{ item.auteurLivre }}</p></span
        >

        <span class="title edition"
          ><i class="fas fa-tag"></i> Edition :
          <p>{{ item.editionLivre }}</p></span
        >
        <span class="title categorie"
          ><i class="fas fa-book"></i> Categorie :
          <p>{{ item.categorie }}</p></span
        >
        <button class="btn btn-primary" (click)="openVoirPLus(item)">
          Voir plus <i class="fa fa-arrow-right"></i>
        </button>
      </div>
    </div>
    }
  </section>
</main>
